"use strict";(self.webpackChunknext_components=self.webpackChunknext_components||[]).push([[6164],{"./src/stories/table/sortTable.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SortTableDefault:()=>SortTableDefault,default:()=>sortTable_stories});var _SortTableDefault$par,_SortTableDefault$par2,defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),objectDestructuringEmpty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js"),esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),src=__webpack_require__("./node_modules/d3/src/index.js"),react=__webpack_require__("./node_modules/react/index.js"),hook=__webpack_require__("./src/component/next-pagination/hook.ts"),pagination=__webpack_require__("./src/component/next-pagination/pagination.tsx"),console=__webpack_require__("./node_modules/console-browserify/index.js"),__jsx=react.createElement;function SortTable(_ref){var _forestArea$Asia,props=(0,esm_extends.Z)({},((0,objectDestructuringEmpty.Z)(_ref),_ref)),_useFetch=(0,hook.i)(),listState=_useFetch.listState,listDispatch=_useFetch.listDispatch,_React$useState=react.useState({}),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),forestArea=_React$useState2[0],setForestArea=_React$useState2[1],_React$useState3=react.useState({type:"entity",isAscending:!0}),_React$useState4=(0,slicedToArray.Z)(_React$useState3,2),sort=_React$useState4[0],setSort=_React$useState4[1],sortedData=react.useMemo((function(){var sorted=Object.entries(forestArea).map((function(_ref2,i){var _ref3=(0,slicedToArray.Z)(_ref2,2);_ref3[0];return _ref3[1]})).sort((function(a,b){return"entity"===sort.type&&sort.isAscending?a[0].entity>b[0].entity?1:-1:"entity"!==sort.type||sort.isAscending?"code"===sort.type&&sort.isAscending?a[0].code>b[0].code?1:-1:"code"!==sort.type||sort.isAscending?"number"==typeof sort.type&&sort.isAscending?(null!==(_a$sort$type=a[sort.type])&&void 0!==_a$sort$type?_a$sort$type:{forestArea:0}).forestArea>(null!==(_b$sort$type=b[sort.type])&&void 0!==_b$sort$type?_b$sort$type:{forestArea:0}).forestArea?1:-1:"number"!=typeof sort.type||sort.isAscending?1:(null!==(_a$sort$type2=a[sort.type])&&void 0!==_a$sort$type2?_a$sort$type2:{forestArea:0}).forestArea>(null!==(_b$sort$type2=b[sort.type])&&void 0!==_b$sort$type2?_b$sort$type2:{forestArea:0}).forestArea?-1:1:a[0].code>b[0].code?-1:1:a[0].entity>b[0].entity?-1:1;var _a$sort$type,_b$sort$type,_a$sort$type2,_b$sort$type2}));return console.log(sorted),props.isPagination?sorted.slice(9*(listState.currentIndex-1),9*(listState.currentIndex-1)+9):sorted}),[forestArea,sort,listState.currentIndex,props.isPagination]);react.useEffect((function(){src.gyn("https://doggycatty.s3.amazonaws.com/app/forest-area-km.csv",(function(d){return{code:d.Code,entity:d.Entity,forestArea:Math.round(+d["Forest area"]),year:+d.Year}})).then((function(data){var dataMap=data.reduce((function(acc,el){return el.entity in acc?acc[el.entity].push(el):acc[el.entity]=[el],acc}),{});console.log(dataMap),setForestArea(dataMap)}))}),[]);var totalPage=react.useMemo((function(){return Math.ceil(Object.keys(forestArea).length/9)}),[forestArea]);return __jsx("div",null,__jsx("span",{className:"block mt-2 ml-4 font-bold dark:text-white"},props.title),0===sortedData.length?__jsx(react.Fragment,null,__jsx("div",{className:"relative mt-2 mb-4 overflow-x-auto shadow-md sm:rounded-lg animate-pulse"},__jsx("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},__jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},__jsx("tr",null,__jsx("th",{scope:"col",className:"px-6 py-3"},__jsx("div",{className:"flex items-center"},"Country",__jsx("button",null,__jsx("svg",{className:"w-3 h-3 ml-1.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"},__jsx("path",{d:"M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"}))))),__jsx("th",{scope:"col",className:"px-6 py-3"},__jsx("div",{className:"flex items-center"},"Code",__jsx("button",null,__jsx("svg",{className:"w-3 h-3 ml-1.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"},__jsx("path",{d:"M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"}))))),new Array(6).fill(0).map((function(el,index){return __jsx("th",{scope:"col",className:"px-6 py-3",key:"".concat(index,"-skeleton")},__jsx("div",{className:"flex items-center"},__jsx("span",{className:"w-10 h-4 bg-gray-400"}),__jsx("button",null,__jsx("svg",{className:"w-3 h-3 ml-1.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"},__jsx("path",{d:"M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"})))))})),__jsx("th",{scope:"col",className:"px-6 py-3"},__jsx("span",{className:"sr-only"},"Edit")))),__jsx("tbody",null,new Array(12).fill(0).map((function(ele,i){return __jsx("tr",{key:"skeleton-".concat(i),className:["border-b dark:border-gray-700",0==(1&i)?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700"].join(" ")},new Array(9).fill(0).map((function(el,index){return __jsx("th",{scope:"row",className:"px-6 py-4 h-10 font-medium text-gray-900 whitespace-nowrap dark:text-white",key:"".concat(index,"-skeleton")})})))})))))):__jsx(hook.Z.Provider,{value:{listState,listDispatch}},__jsx("div",{className:"relative mt-2 mb-4 overflow-x-auto shadow-md sm:rounded-lg"},__jsx("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},__jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},__jsx("tr",null,__jsx("th",{scope:"col",className:"px-6 py-3"},__jsx("div",{className:"flex items-center"},"Country",__jsx("button",{onClick:function onClick(){return setSort({type:"entity",isAscending:!sort.isAscending})}},__jsx("svg",{className:"w-3 h-3 ml-1.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"},__jsx("path",{d:"M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"}))))),__jsx("th",{scope:"col",className:"px-6 py-3"},__jsx("div",{className:"flex items-center"},"Code",__jsx("button",{onClick:function onClick(){return setSort({type:"code",isAscending:!sort.isAscending})}},__jsx("svg",{className:"w-3 h-3 ml-1.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"},__jsx("path",{d:"M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"}))))),forestArea&&(null!==(_forestArea$Asia=forestArea.Asia)&&void 0!==_forestArea$Asia?_forestArea$Asia:[]).map((function(el,index){return __jsx("th",{scope:"col",className:"px-6 py-3",key:"".concat(el.code,"-").concat(index)},__jsx("div",{className:"flex items-center"},el.year,__jsx("button",{onClick:function onClick(){console.log(index),setSort({type:index,isAscending:!sort.isAscending})}},__jsx("svg",{className:"w-3 h-3 ml-1.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"},__jsx("path",{d:"M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"})))))})),__jsx("th",{scope:"col",className:"px-6 py-3"},__jsx("span",{className:"sr-only"},"Edit")))),__jsx("tbody",null,sortedData&&sortedData.map((function(ele,i){return __jsx("tr",{key:"".concat(ele[0].code,"-").concat(i),className:["border-b dark:border-gray-700",0==(1&i)?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700"].join(" ")},__jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},ele[0].entity),__jsx("td",{className:"px-6 py-4"},ele[0].code),ele.map((function(el,index){return __jsx("td",{key:"".concat(ele[0].entity,"-").concat(el.code,"-").concat(index),className:"px-6 py-4"},el.forestArea)})))}))))),props.isPagination?__jsx(pagination.Z,{lastPageIndex:totalPage}):null))}SortTable.displayName="SortTable",SortTable.__docgenInfo={description:"",methods:[],displayName:"SortTable",props:{title:{required:!0,tsType:{name:"string"},description:"title"},isPagination:{required:!1,tsType:{name:"boolean"},description:"isPagination?"}}};try{SortTable.displayName="SortTable",SortTable.__docgenInfo={description:"",displayName:"SortTable",props:{title:{defaultValue:null,description:"title",name:"title",required:!0,type:{name:"string"}},isPagination:{defaultValue:null,description:"isPagination?",name:"isPagination",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/component/table/sortTable.tsx#SortTable"]={docgenInfo:SortTable.__docgenInfo,name:"SortTable",path:"src/component/table/sortTable.tsx#SortTable"})}catch(__react_docgen_typescript_loader_error){}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const sortTable_stories={title:"Scenary/SortTable",component:SortTable,tags:["autodocs"],parameters:{layout:"fullscreen"}};var SortTableDefault={args:{title:"Global Forest Area",isPagination:!0}};SortTableDefault.parameters=_objectSpread(_objectSpread({},SortTableDefault.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_SortTableDefault$par=SortTableDefault.parameters)||void 0===_SortTableDefault$par?void 0:_SortTableDefault$par.docs),{},{source:_objectSpread({originalSource:'{\n  args: {\n    title: "Global Forest Area",\n    isPagination: true\n  }\n}'},null===(_SortTableDefault$par2=SortTableDefault.parameters)||void 0===_SortTableDefault$par2||null===(_SortTableDefault$par2=_SortTableDefault$par2.docs)||void 0===_SortTableDefault$par2?void 0:_SortTableDefault$par2.source)})})}}]);